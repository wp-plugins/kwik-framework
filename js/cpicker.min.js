jQuery&&function(a){function b(b,c){var d=a('<span class="cpicker" />'),e=a.cpicker.defaultSettings;b.data("cpicker-initialized")||(c=a.extend(!0,{},e,c),d.addClass("cpicker-theme-"+c.theme).addClass("cpicker-swatch-position-"+c.swatchPosition).toggleClass("cpicker-swatch-left","left"===c.swatchPosition).toggleClass("cpicker-with-opacity",c.opacity),void 0!==c.position&&a.each(c.position.split(" "),function(){d.addClass("cpicker-position-"+this)}),b.addClass("cpicker-input").data("cpicker-initialized",!0).data("cpicker-settings",c).prop("size",7).prop("maxlength",7).wrap(d).after('<span class="cpicker-panel cpicker-slider-'+c.control+'">'+'<span class="cpicker-slider">'+'<span class="cpicker-picker"></span>'+"</span>"+'<span class="cpicker-opacity-slider">'+'<span class="cpicker-picker"></span>'+"</span>"+'<span class="cpicker-grid">'+'<span class="cpicker-grid-inner"></span>'+'<span class="cpicker-picker"><span></span></span>'+"</span>"+"</span>"),b.parent().find(".cpicker-panel").on("selectstart",function(){return!1}).end(),"left"===c.swatchPosition?b.before('<span class="cpicker-swatch"><span></span></span>'):b.after('<span class="cpicker-swatch"><span></span></span>'),c.textfield||b.addClass("cpicker-hidden"),c.inline&&b.parent().addClass("cpicker-inline"),i(b,!1,!0))}function c(a){var b=a.parent();a.removeData("cpicker-initialized").removeData("cpicker-settings").removeProp("size").removeProp("maxlength").removeClass("cpicker-input"),b.before(a).remove()}function d(a){i(a)}function e(a){var b=a.parent(),c=b.find(".cpicker-panel"),d=a.data("cpicker-settings");!a.data("cpicker-initialized")||a.prop("disabled")||b.hasClass("cpicker-inline")||b.hasClass("cpicker-focus")||(f(),b.addClass("cpicker-focus"),c.stop(!0,!0).fadeIn(d.showSpeed,function(){d.show&&d.show.call(a)}))}function f(){a(".cpicker-input").each(function(){var b=a(this),c=b.data("cpicker-settings"),d=b.parent();c.inline||d.find(".cpicker-panel").fadeOut(c.hideSpeed,function(){d.hasClass("cpicker-focus")&&c.hide&&c.hide.call(b),d.removeClass("cpicker-focus")})})}function g(a,b,c){var m,n,o,p,d=a.parents(".cpicker").find(".cpicker-input"),e=d.data("cpicker-settings"),f=a.find("[class$=-picker]"),g=a.offset().left,i=a.offset().top,j=Math.round(b.pageX-g),k=Math.round(b.pageY-i),l=c?e.animationSpeed:0;b.originalEvent.changedTouches&&(j=b.originalEvent.changedTouches[0].pageX-g,k=b.originalEvent.changedTouches[0].pageY-i),0>j&&(j=0),0>k&&(k=0),j>a.width()&&(j=a.width()),k>a.height()&&(k=a.height()),a.parent().is(".cpicker-slider-wheel")&&f.parent().is(".cpicker-grid")&&(m=75-j,n=75-k,o=Math.sqrt(m*m+n*n),p=Math.atan2(n,m),0>p&&(p+=2*Math.PI),o>75&&(o=75,j=75-75*Math.cos(p),k=75-75*Math.sin(p)),j=Math.round(j),k=Math.round(k)),a.is(".cpicker-grid")?f.stop(!0).animate({top:k+"px",left:j+"px"},l,e.animationEasing,function(){h(d,a)}):f.stop(!0).animate({top:k+"px"},l,e.animationEasing,function(){h(d,a)})}function h(a,b){function c(a,b){var c,d;return a.length&&b?(c=a.offset().left,d=a.offset().top,{x:c-b.offset().left+a.outerWidth()/2,y:d-b.offset().top+a.outerHeight()/2}):null}var d,e,f,h,i,k,l,n=a.val(),p=a.attr("data-opacity"),q=a.parent(),s=a.data("cpicker-settings"),u=(q.find(".cpicker-panel"),q.find(".cpicker-swatch")),v=q.find(".cpicker-grid"),w=q.find(".cpicker-slider"),x=q.find(".cpicker-opacity-slider"),y=v.find("[class$=-picker]"),z=w.find("[class$=-picker]"),A=x.find("[class$=-picker]"),B=c(y,v),C=c(z,w),D=c(A,x);if(b.is(".cpicker-grid, .cpicker-slider")){switch(s.control){case"wheel":h=v.width()/2-B.x,i=v.height()/2-B.y,k=Math.sqrt(h*h+i*i),l=Math.atan2(i,h),0>l&&(l+=2*Math.PI),k>75&&(k=75,B.x=69-75*Math.cos(l),B.y=69-75*Math.sin(l)),e=o(k/.75,0,100),d=o(180*l/Math.PI,0,360),f=o(100-Math.floor(C.y*(100/w.height())),0,100),n=r({h:d,s:e,b:f}),w.css("backgroundColor",r({h:d,s:e,b:100}));break;case"saturation":d=o(parseInt(B.x*(360/v.width())),0,360),e=o(100-Math.floor(C.y*(100/w.height())),0,100),f=o(100-Math.floor(B.y*(100/v.height())),0,100),n=r({h:d,s:e,b:f}),w.css("backgroundColor",r({h:d,s:100,b:f})),q.find(".cpicker-grid-inner").css("opacity",e/100);break;case"brightness":d=o(parseInt(B.x*(360/v.width())),0,360),e=o(100-Math.floor(B.y*(100/v.height())),0,100),f=o(100-Math.floor(C.y*(100/w.height())),0,100),n=r({h:d,s:e,b:f}),w.css("backgroundColor",r({h:d,s:e,b:100})),q.find(".cpicker-grid-inner").css("opacity",1-f/100);break;default:d=o(360-parseInt(C.y*(360/w.height())),0,360),e=o(Math.floor(B.x*(100/v.width())),0,100),f=o(100-Math.floor(B.y*(100/v.height())),0,100),n=r({h:d,s:e,b:f}),v.css("backgroundColor",r({h:d,s:100,b:100}))}a.val(m(n,s.letterCase))}b.is(".cpicker-opacity-slider")&&(p=s.opacity?parseFloat(1-D.y/x.height()).toFixed(2):1,s.opacity&&a.attr("data-opacity",p)),u.find("SPAN").css({backgroundColor:n,opacity:p}),j(a,n,p)}function i(a,b,c){var d,e,f,g,h,i,k,l=a.parent(),p=a.data("cpicker-settings"),q=l.find(".cpicker-swatch"),t=l.find(".cpicker-grid"),u=l.find(".cpicker-slider"),v=l.find(".cpicker-opacity-slider"),w=t.find("[class$=-picker]"),x=u.find("[class$=-picker]"),y=v.find("[class$=-picker]");switch(d=m(n(a.val(),!0),p.letterCase),d||(d=m(n(p.defaultValue,!0))),e=s(d),b||a.val(d),p.opacity&&(f=""===a.attr("data-opacity")?1:o(parseFloat(a.attr("data-opacity")).toFixed(2),0,1),isNaN(f)&&(f=1),a.attr("data-opacity",f),q.find("SPAN").css("opacity",f),h=o(v.height()-v.height()*f,0,v.height()),y.css("top",h+"px")),q.find("SPAN").css("backgroundColor",d),p.control){case"wheel":i=o(Math.ceil(.75*e.s),0,t.height()/2),k=e.h*Math.PI/180,g=o(75-Math.cos(k)*i,0,t.width()),h=o(75-Math.sin(k)*i,0,t.height()),w.css({top:h+"px",left:g+"px"}),h=150-e.b/(100/t.height()),""===d&&(h=0),x.css("top",h+"px"),u.css("backgroundColor",r({h:e.h,s:e.s,b:100}));break;case"saturation":g=o(5*e.h/12,0,150),h=o(t.height()-Math.ceil(e.b/(100/t.height())),0,t.height()),w.css({top:h+"px",left:g+"px"}),h=o(u.height()-e.s*(u.height()/100),0,u.height()),x.css("top",h+"px"),u.css("backgroundColor",r({h:e.h,s:100,b:e.b})),l.find(".cpicker-grid-inner").css("opacity",e.s/100);break;case"brightness":g=o(5*e.h/12,0,150),h=o(t.height()-Math.ceil(e.s/(100/t.height())),0,t.height()),w.css({top:h+"px",left:g+"px"}),h=o(u.height()-e.b*(u.height()/100),0,u.height()),x.css("top",h+"px"),u.css("backgroundColor",r({h:e.h,s:e.s,b:100})),l.find(".cpicker-grid-inner").css("opacity",1-e.b/100);break;default:g=o(Math.ceil(e.s/(100/t.width())),0,t.width()),h=o(t.height()-Math.ceil(e.b/(100/t.height())),0,t.height()),w.css({top:h+"px",left:g+"px"}),h=o(u.height()-e.h/(360/u.height()),0,u.height()),x.css("top",h+"px"),t.css("backgroundColor",r({h:e.h,s:100,b:100}))}c||j(a,d,f)}function j(a,b,c){var d=a.data("cpicker-settings");b+c!==a.data("cpicker-lastChange")&&(a.data("cpicker-lastChange",b+c),d.change&&(d.changeDelay?(clearTimeout(a.data("cpicker-changeTimeout")),a.data("cpicker-changeTimeout",setTimeout(function(){d.change.call(a,b,c)},d.changeDelay))):d.change.call(a,b,c)))}function k(b){var c=n(a(b).val(),!0),d=u(c),e=a(b).attr("data-opacity");return d?(void 0!==e&&a.extend(d,{a:parseFloat(e)}),d):null}function l(b,c){var d=n(a(b).val(),!0),e=u(d),f=a(b).attr("data-opacity");return e?(void 0===f&&(f=1),c?"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(f)+")":"rgb("+e.r+", "+e.g+", "+e.b+")"):null}function m(a,b){return"uppercase"===b?a.toUpperCase():a.toLowerCase()}function n(a,b){return a=a.replace(/[^A-F0-9]/gi,""),3!==a.length&&6!==a.length?"":(3===a.length&&b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),"#"+a)}function o(a,b,c){return b>a&&(a=b),a>c&&(a=c),a}function p(a){var b={},c=Math.round(a.h),d=Math.round(255*a.s/100),e=Math.round(255*a.b/100);if(0===d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360===c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}}function q(b){var c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];return a.each(c,function(a,b){1===b.length&&(c[a]="0"+b)}),"#"+c.join("")}function r(a){return q(p(a))}function s(a){var b=t(u(a));return 0===b.s&&(b.h=360),b}function t(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!==d?255*e/d:0,b.h=0!==b.s?a.r===d?(a.g-a.b)/e:a.g===d?2+(a.b-a.r)/e:4+(a.r-a.g)/e:-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b}function u(a){return a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16),{r:a>>16,g:(65280&a)>>8,b:255&a}}a.cpicker={defaultSettings:{animationSpeed:100,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"default",show:null,showSpeed:100,swatchPosition:"left",textfield:!0,theme:"default"}},a.extend(a.fn,{cpicker:function(g,h){switch(g){case"destroy":return a(this).each(function(){c(a(this))}),a(this);case"hide":return f(),a(this);case"opacity":return void 0===h?a(this).attr("data-opacity"):(a(this).each(function(){d(a(this).attr("data-opacity",h))}),a(this));case"rgbObject":return k(a(this),"rgbaObject"===g);case"rgbString":case"rgbaString":return l(a(this),"rgbaString"===g);case"settings":return void 0===h?a(this).data("cpicker-settings"):(a(this).each(function(){var b=a(this).data("cpicker-settings")||{};c(a(this)),a(this).cpicker(a.extend(!0,b,h))}),a(this));case"show":return e(a(this).eq(0)),a(this);case"value":return void 0===h?a(this).val():(a(this).each(function(){d(a(this).val(h))}),a(this));case"create":default:return"create"!==g&&(h=g),a(this).each(function(){b(a(this),h)}),a(this)}}}),a(document).on("mousedown.cpicker touchstart.cpicker",function(b){a(b.target).parents().add(b.target).hasClass("cpicker")||f()}).on("mousedown.cpicker touchstart.cpicker",".cpicker-grid, .cpicker-slider, .cpicker-opacity-slider",function(b){var c=a(this);b.preventDefault(),a(document).data("cpicker-target",c),g(c,b,!0)}).on("mousemove.cpicker touchmove.cpicker",function(b){var c=a(document).data("cpicker-target");c&&g(c,b)}).on("mouseup.cpicker touchend.cpicker",function(){a(this).removeData("cpicker-target")}).on("mousedown.cpicker touchstart.cpicker",".cpicker-swatch",function(){var c=a(this).parent().find(".cpicker-input"),d=c.parent();d.hasClass("cpicker-focus")?f(c):e(c)}).on("focus.cpicker",".cpicker-input",function(){var c=a(this);c.data("cpicker-initialized")&&e(c)}).on("blur.cpicker",".cpicker-input",function(){var c=a(this),d=c.data("cpicker-settings");c.data("cpicker-initialized")&&(c.val(n(c.val(),!0)),""===c.val()&&c.val(n(d.defaultValue,!0)),c.val(m(c.val(),d.letterCase)))}).on("keydown.cpicker",".cpicker-input",function(b){var c=a(this);if(c.data("cpicker-initialized"))switch(b.keyCode){case 9:f();break;case 27:f(),c.blur()}}).on("keyup.cpicker",".cpicker-input",function(){var c=a(this);c.data("cpicker-initialized")&&i(c,!0)}).on("paste.cpicker",".cpicker-input",function(){var c=a(this);c.data("cpicker-initialized")&&setTimeout(function(){i(c,!0)},1)})}(jQuery),jQuery(document).ready(function(a){a("input.cpicker").each(function(){a(this).cpicker({change:function(){var b=a(this);b.parent(".cpicker").after(function(){return a(this).siblings(".clear_color").length<1?'<span class="clear_color" title="Clearing the color will make it &quot;transparent&quot;"></span>':void 0})}})}),a(".clear_color").live("click",function(){var b=a(this).siblings(".cpicker"),c=b.children(".cpicker-swatch");b.children("input").val(""),c.children("span").attr("style",""),a(this).remove()})});